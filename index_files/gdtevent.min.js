try{!function(e,t,n,i){"use strict";function r(e){for(var t in e)k.has(e,t)&&(this[t]=e[t])}function o(e){var t=k.toArray(arguments);switch(e=t.shift()){case"init":return s.apply(this,t);case"track":return c.apply(this,t);case"track_custom":return l.apply(this,t);case"track_visually":return u.apply(this,t);default:k.logError('Invalid or unknown method name "'+e+'"')}}function a(t){B.isBrowserSupported()&&(te&&k.sendMessageToDMP({type:"BASE_CODE_INSTALLED",userActionSetId:t}),B.init(t,Q),te&&e.parent===e.top&&J.init(t,Q))}function s(e){if(k.has($,e))k.logError("Duplicate Pixel ID: "+e);else{var t={id:e};K.push(t),$[e]=t,a(e)}}function l(e,t,n){t=t||{};var i=H.validateActionParam(e,t);if(i.error&&k.logError(i.error),i.warnings)for(var o=0,a=i.warnings.length;o<a;o++)k.logWarning(i.warnings[o]);for(var s=this instanceof r?this:le,l="PAGE_VIEW"===e,c=0,u=K.length;c<u;c++)if(!l||!1!==s.allowDuplicatePageViews||!0!==Z[K[c].id]){if(l&&B.state!==y.NORMAL)return;f(K[c],e,t,n),l&&(Z[K[c].id]=!0)}}function c(e,t){var n=H.validateActionType(e,t);if(n.error&&k.logError(n.error),n.warnings)for(var i=0,r=n.warnings.length;i<r;i++)k.logWarning(n.warnings[i]);l.call(this,e,t,null)}function u(e,t,n){l.call(this,e,t,n)}function d(e,t,n,i){e=e||{};var r={};return r.user_action_set_id=e.id,r.url=ne,r.js_version=p.SDK_VERSION,r.is_iframe=te,_[t]?r.action_type=t:(r.action_type="CUSTOM",r.custom_action=t),i&&i.vtrack&&(2===Q.bt?r.code_type=2:r.code_type=1),k.isEmpty(ee)||(r.referrer=ee),k.isEmpty(se)?k.isEmpty(ae)||(r.qz_gdt=ae):r.qz_gdt=se,k.has(n,"url")&&(k.logError('Parameter "url" in your action param is invalid.'),delete n.url),k.has(n,re)&&(r[re]=n[re],delete n[re]),k.isEmpty(n)||(r.action_param=n),r}function f(e,t,n,i){var r=d(e,t,n,i),o=k.HTTPBuildQuery(r);2e3>(ie+"?"+o).length?h(ie,o):g(ie,r)}function h(e,t){var n=new Image,i=(new Date).getTime();n.onload=function(){k.retCodeService("/pixel",!0,0,i)},n.onerror=function(){k.retCodeService("/pixel",!1,500,i),k.logError("Action report failed.")},n.src=e+"?"+t}function g(n,i){var r="gdt_"+Math.random().toString().replace(".",""),o=t.createElement("form");o.method="post",o.action=n,o.target=r,o.acceptCharset="utf-8",o.style.display="none";var a=!(!e.attachEvent||e.addEventListener)?'<iframe name="'+r+'">':"iframe",s=t.createElement(a);s.src="javascript:false",s.id=r,s.name=r,o.appendChild(s),k.listenOnce(s,"load",function(){k.each(i,function(e,n){var i=t.createElement("input");i.name=n,i.value=k.isObject(e)?k.JSONEncode(e):e.toString(),o.appendChild(i)}),k.listenOnce(s,"load",function(){o.parentNode.removeChild(o)}),o.submit()}),t.body.appendChild(o)}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i;var p={SDK_VERSION:"1.2.2"},_={PAGE_VIEW:{},VIEW_CONTENT:{},SEARCH:{},REGISTER:{},CONSULT:{},ADD_TO_CART:{},ADD_TO_WISHLIST:{},INITIATE_CHECKOUT:{},COMPLETE_ORDER:{},PURCHASE:{},RESERVATION:{},DOWNLOAD_APP:{},START_APP:{},RATE:{},SHARE:{},APPLY:{},CLAIM_OFFER:{},NAVIGATE:{},PRODUCT_RECOMMEND:{},VISIT_STORE:{},TRY_OUT:{},DELIVER:{},SIGN_IN:{}},E={debug:!1},m={ENTER_EDIT_STATE:"ENTER_EDIT_STATE",EDITING_ACTION:"EDITING_ACTION",PREVIEW_ACTION:"PREVIEW_VISUAL_ACTION",SHOW_SELECTED_ELEMENTS:"SHOW_SELECTED_ELEMENTS"},v={TRACKER_READY:"TRACKER_READY",CHOOSE_ELEMENT:"CHOOSE_ELEMENT",REPORTING_VISUAL_ACTION:"REPORTING_VISUAL_ACTION",PAGE_UNLOAD:"PAGE_UNLOAD"},y={NORMAL:0,EDIT:1,PREVIEW:2},T=Array.prototype,b=Function.prototype,S=Object.prototype,A=T.slice,L=S.toString,O=S.hasOwnProperty,C=(e.navigator.userAgent,n.protocol),I=b.bind,N=T.forEach,w=Array.isArray,P={},D=!("addEventListener"in t),x=e.console||{},M=e.postMessage||function(){},R="https:"!==C&&"http:"!==C?"http://report.huatuo.qq.com/code.cgi":"//report.huatuo.qq.com/code.cgi",k={trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}};k.each=function(e,t,n){if(null!==e&&void 0!==e)if(N&&e.forEach===N)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,r=e.length;i<r;i++)if(i in e&&t.call(n,e[i],i,e)===P)return}else for(var o in e)if(O.call(e,o)&&t.call(n,e[o],o,e)===P)return},k.has=function(e,t){return null!=e&&O.call(e,t)},k.includes=function(e,t){return-1!==e.indexOf(t)},k.isUndefined=function(e){return void 0===e},k.isNull=function(e){return null===e},k.isArray=w||function(e){return"[object Array]"==L.call(e)},k.isArguments=function(e){return!(!e||!O.call(e,"callee"))},k.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},k.isObject=function(e){return e===Object(e)&&!k.isArray(e)},k.isString=function(e){return"[object String]"==L.call(e)},k.isDate=function(e){return"[object Date]"==L.call(e)},k.isNumber=function(e){return"[object Number]"==L.call(e)},k.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==L.call(e)},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.extend=function(e){return k.each(A.call(arguments,1),function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])}),e},k.keys=function(e){var t=[];return null===e?t:(k.each(e,function(e,n){t[t.length]=n}),t)},k.values=function(e){var t=[];return null===e?t:(k.each(e,function(e){t[t.length]=e}),t)},k.toArray=function(e){return e?e.toArray?e.toArray():k.isArray(e)?A.call(e):k.isArguments(e)?A.call(e):k.values(e):[]};var q=function(){};k.bind=function(e,t){var n,i;if(I&&e.bind===I)return I.apply(e,A.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return n=A.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(A.call(arguments)));q.prototype=e.prototype;var r=new q;q.prototype=null;var o=e.apply(r,n.concat(A.call(arguments)));return Object(o)===o?o:r}},k.getQueryParam=function(e,t){var n="[\\?&]"+t+"=([^&#]*)",i=new RegExp(n).exec(e);return null===i||i&&"string"!=typeof i[1]&&i[1].length?"":decodeURIComponent(i[1]).replace(/\+/g," ")},k.HTTPBuildQuery=function(e,t){var n,i,r=[];return k.isUndefined(t)&&(t="&"),k.each(e,function(e,t){n=k.isArray(e)||k.isObject(e)?encodeURIComponent(k.JSONEncode(e)):encodeURIComponent(e.toString()),i=encodeURIComponent(t),r[r.length]=i+"="+n}),r.join(t)},k.register_event=function(){function t(t,i,r){return function(o){if(o=o||n(e.event)){var a,s,l=!0;return k.isFunction(r)&&(a=r(o)),s=i.call(t,o),!1!==a&&!1!==s||(l=!1),l}}}function n(e){return e&&(e.preventDefault=n.preventDefault,e.stopPropagation=n.stopPropagation),e}return n.preventDefault=function(){this.returnValue=!1},n.stopPropagation=function(){this.cancelBubble=!0},function(e,n,i,r,o){if(e)if(e.addEventListener&&!r)e.addEventListener(n,i,!!o);else{var a="on"+n,s=e[a];e[a]=t(e,i,s)}else k.logError("No valid element provided!")}}(),k.isElementVisible=function(){function n(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}var i=e.pageXOffset?e.pageXOffset+e.innerWidth-1:0,r=e.pageYOffset?e.pageYOffset+e.innerHeight-1:0,o=!((i||r)&&t.elementFromPoint(i,r));return function(i){if(t.hidden||0==i.offsetWidth||0==i.offsetHeight||"hidden"==i.style.visibility||"none"==i.style.display||0===i.style.opacity)return!1;var r=i.getBoundingClientRect();if(o){if(!n(t.elementFromPoint(r.left+i.offsetWidth/2,r.top+i.offsetHeight/2),i))return!1}else if(!n(t.elementFromPoint(r.left+i.offsetWidth/2+e.pageXOffset,r.top+i.offsetHeight/2+e.pageYOffset),i)||r.top+i.offsetHeight/2<0||r.left+i.offsetWidth/2<0||r.bottom-i.offsetHeight/2>(e.innerHeight||t.documentElement.clientHeight)||r.right-i.offsetWidth/2>(e.innerWidth||t.documentElement.clientWidth))return!1;if(e.getComputedStyle||i.currentStyle)for(var a=i,s=null;a&&a!==t;){if(!a.parentNode)return!1;if((s=e.getComputedStyle?e.getComputedStyle(a,null):a.currentStyle)&&("hidden"==s.visibility||"none"==s.display||void 0!==s.opacity&&1!=s.opacity))return!1;a=a.parentNode}return!0}}(),k.log=function(e){E.debug&&"log"in x&&x.log(e)},k.logError=function(e){M({action:"GDT_LOG",logType:"GDT_Pixel_Error",logMessage:e},"*"),"error"in x&&x.error("GDT_Pixel_Error: "+e)},k.logWarning=function(e){M({action:"GDT_LOG",logType:"GDT_Pixel_Warning",logMessage:e},"*"),"warn"in x&&x.warn("GDT_Pixel_Warning: "+e)},k.listenOnce=function(e,t,n){t=D?"on"+t:t;var i=D?"attachEvent":"addEventListener",r=D?"detachEvent":"removeEventListener";e[i](t,function i(){e[r](t,i,!1),n()},!1)},k.injectMethod=function(e,t,n){var i=e[t];e[t]=function(){var e=i.apply(this,arguments);return n.apply(this,arguments),e}},k.retCodeService=function(e,t,n,i){var r=(new Date).getTime()-i,o={appid:20187,platform:"web",domain:"a.gdt.qq.com",cgi:e,type:t?1:2,code:n,time:r,rate:1};(new Image).src=R+"?"+k.HTTPBuildQuery(o)},k.JSONEncode=function(e){var t=function(e){var t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?'"'+e.replace(t,function(e){var t=n[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},n=function(e,i){var r="",o=0,a="",s="",l=0,c=r,u=[],d=i[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),typeof d){case"string":return t(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(r+="",u=[],"[object Array]"===L.apply(d)){for(l=d.length,o=0;o<l;o+=1)u[o]=n(o,d)||"null";return s=0===u.length?"[]":r?"[\n"+r+u.join(",\n"+r)+"\n"+c+"]":"["+u.join(",")+"]",r=c,s}for(a in d)O.call(d,a)&&(s=n(a,d))&&u.push(t(a)+(r?": ":":")+s);return s=0===u.length?"{}":r?"{"+u.join(",")+c+"}":"{"+u.join(",")+"}",r=c,s}};return n("",{"":e})},k.JSONDecode=function(){var e,t,n,i,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(t){throw{name:"SyntaxError",message:t,at:e,text:n}},a=function(i){return i&&i!==t&&o("Expected '"+i+"' instead of '"+t+"'"),t=n.charAt(e),e+=1,t},s=function(){var e,n="";for("-"===t&&(n="-",a("-"));t>="0"&&t<="9";)n+=t,a();if("."===t)for(n+=".";a()&&t>="0"&&t<="9";)n+=t;if("e"===t||"E"===t)for(n+=t,a(),"-"!==t&&"+"!==t||(n+=t,a());t>="0"&&t<="9";)n+=t,a();if(e=+n,isFinite(e))return e;o("Bad number")},l=function(){var e,n,i,s="";if('"'===t)for(;a();){if('"'===t)return a(),s;if("\\"===t)if(a(),"u"===t){for(i=0,n=0;n<4&&(e=parseInt(a(),16),isFinite(e));n+=1)i=16*i+e;s+=String.fromCharCode(i)}else{if("string"!=typeof r[t])break;s+=r[t]}else s+=t}o("Bad string")},c=function(){for(;t&&t<=" ";)a()},u=function(){switch(t){case"t":return a("t"),a("r"),a("u"),a("e"),!0;case"f":return a("f"),a("a"),a("l"),a("s"),a("e"),!1;case"n":return a("n"),a("u"),a("l"),a("l"),null}o('Unexpected "'+t+'"')},d=function(){var e=[];if("["===t){if(a("["),c(),"]"===t)return a("]"),e;for(;t;){if(e.push(i()),c(),"]"===t)return a("]"),e;a(","),c()}}o("Bad array")},f=function(){var e,n={};if("{"===t){if(a("{"),c(),"}"===t)return a("}"),n;for(;t;){if(e=l(),c(),a(":"),Object.hasOwnProperty.call(n,e)&&o('Duplicate key "'+e+'"'),n[e]=i(),c(),"}"===t)return a("}"),n;a(","),c()}}o("Bad object")};return i=function(){switch(c(),t){case"{":return f();case"[":return d();case'"':return l();case"-":return s();default:return t>="0"&&t<="9"?s():u()}},function(r){var a;return n=r,e=0,t=" ",a=i(),c(),t&&o("Syntax error"),a}}(),k.bind_instance_methods=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=k.bind(e[t],e))},k.safewrap_instance_methods=function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=k.safewrap(e[t]))},k.safewrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){k.logError("Internal error. Please contact dmp@tencent.com.")}}},k.sendMessageToDMP=function(t){e.parent.postMessage(t,"*")},k.queryElement=function(e){return t.querySelector(e)};var H=function(){function e(e,t){this.actionType=e,this.actionParam=t||{},this.error=null,this.warnings=[]}return e.prototype={validateActionType:function(){return _[this.actionType]||this.warnings.push('You are sending a non-standard action "'+this.actionType+'". The preferred way to send custom action is using track_custom.'),this},validateActionParam:function(){var e=/^[_a-zA-Z0-9]+$/,t=this;return k.each(this.actionParam,function(n,i){if(e.test(i)||t._error("Action parameter's key \""+i+'" can only contain String, Number and Underline.'),k.isArray(n))for(var r=0,o=n.length;r<o;r++)k.isObject(n[r])&&t._error('Action parameter "'+i+'" value can not contain Object.');else k.isObject(n)&&t._error('Action parameter "'+i+"'s value\" can not be Object.")}),this},_error:function(e){return this.error=e,this}},{validateActionType:function(t,n){return new e(t,n).validateActionType()},validateActionParam:function(t,n){return new e(t,n).validateActionParam()}}}(),j="https:"!==n.protocol&&"http:"!==n.protocol?"http://a.gdt.qq.com/config":"//a.gdt.qq.com/config",V=!1,B={state:y.NORMAL,_actionConfigList:[],init:function(e,t){this._gdtLib=t,this._userActionSetId=e;var i=k.bind(function(e){var n=(new Date).getTime();e&&0===e.code?(k.retCodeService("/config",!0,0,n),this._actionConfigList=e.data,V&&this._addDomEventHandlers(t,e.data)):k.retCodeService("/config",!1,500,n)},this);t._send_request(j,{user_action_set_id:e,url:n.href,code_type:2===t.bt?2:1},t._prepare_callback(i))},_addDomEventHandlers:function(t,i){if(!k.isEmpty(i)&&t){var r=i,o=this,a="ontouchstart"in e?"touchstart":"click";k.each(r,function(i){var r=k.queryElement(i.selector);if(r){var s=k.bind(function(n){n=n||e.event,this._trackEvent(n,t,i,r)},o);k.register_event(r,a,s,!1,!0)}else{var l={error:"QueryElement",userActionSetId:this._userActionSetId,url:n.href,extra:i},c=encodeURIComponent(k.JSONEncode(l));(new Image).src="//a.gdt.qq.com/err?c=dmp_js_vtrack_warn&m="+c}})}},domLoaded:function(){this._addDomEventHandlers(this._gdtLib,this._actionConfigList)},_trackEvent:function(e,t,n,i){var r=n.action_type;_[r]||(r=n.custom_action),t("track_visually",r,null,{vtrack:!0})},isBrowserSupported:function(){return k.isFunction(t.querySelector)}};k.bind_instance_methods(B),k.safewrap_instance_methods(B),function(){function n(){n.done||(n.done=!0,V=!0,B.domLoaded())}function i(){try{t.documentElement.doScroll("left")}catch(e){return void setTimeout(i,1)}n()}if(t.addEventListener)"complete"===t.readyState?n():t.addEventListener("DOMContentLoaded",n,!1);else if(t.attachEvent){t.attachEvent("onreadystatechange",n);var r=!1;try{r=null===e.frameElement}catch(e){}t.documentElement.doScroll&&r&&i()}k.register_event(e,"load",n,!0)}();for(var U=".tsa-union-behavior-config-handle-hover{position:absolute;box-sizing:border-box;cursor:pointer;border:2px solid #1690e5;background:rgba(22,144,229,.5);z-index:2147483647;pointer-events:none;}.tsa-union-behavior-config-handle-selected{position:absolute;box-sizing:border-box;cursor:pointer;border:2px solid #DB27DB;background-color: rgba(219,39,219,.5);z-index:2147483647;pointer-events:none;}",W="tsa-union-behavior-config-handle-selected",G="tsa-union-behavior-config-handle-hover",F="selected-highlight-element",Y=["dmpVtrackEditor","hover-highlight-element",F],z=[],X=0;X<5;X++)z.push("show-highlight-element-"+X),Y.push("show-highlight-element-"+X);var J={_editingActionList:[],_showAllSelectedElement:!1,_coverElements:{},init:function(i,r){if(t&&t.body){e.addEventListener("message",k.bind(this._vtrackMessageListener,this)),e.addEventListener("beforeunload",k.bind(this._pageUnloadListener,this)),e.addEventListener("onunload",k.bind(this._pageUnloadListener,this)),k.sendMessageToDMP({type:v.TRACKER_READY,userActionSetId:i,editUrl:n.href}),this._loadInlineCss();var o=t.createElement("dmp-vtrack-editor");this._setAttr(o,"id","dmpVtrackEditor"),this._append(t.getElementsByTagName("body")[0],o)}else{k.log("document not ready yet, trying again in 500 milliseconds...");var a=this;setTimeout(function(){a.init(i,r)},500)}},_vtrackMessageListener:function(n){if(!1!==E.debug||-1!==n.origin.indexOf("//de.qq.com")){var i=n.data;if("GDT_LOG"!==i.action)switch(k.isNull(this._bindedMouseOverListener)&&(this._bindedMouseOverListener=k.bind(this._editMouseOverListener,this)),k.isNull(this._bindedMouseOutListener)&&(this._bindedMouseOutListener=k.bind(this._editMouseOutListener,this)),k.isNull(this._bindedClickListener)&&(this._bindedClickListener=k.bind(this._editClickListener,this)),k.isNull(this._bindedCoversObserver)&&(this._bindedCoversObserver=k.bind(this._updateCovers,this)),i.type){case m.ENTER_EDIT_STATE:k.log("Enter visual config edit mode"),B.state=y.EDIT,this._editingActionList=i.editingActionList,t.addEventListener("mouseover",this._bindedMouseOverListener,!0),t.addEventListener("mouseout",this._bindedMouseOutListener,!0),t.addEventListener("click",this._bindedClickListener,!0),e.setInterval(this._bindedCoversObserver,500);break;case m.EDITING_ACTION:k.log("DMP Web is editing action"),k.log(i),this._editingActionList=i.editingActionList,this._updateCoverElements(),this._updateCovers();break;case m.PREVIEW_ACTION:k.log("Enter preview mode"),B.state=y.PREVIEW,this._hideSelectedElement(),this._hideHoverElement();break;case m.SHOW_SELECTED_ELEMENTS:this._showAllSelectedElement=i.show,i.show?(k.log("Show all selected elements"),this._showAllSelectedElements()):(k.log("Hide all selected elements"),this._hideAllSelectedElements())}else k.log("Filter GDT_LOG message")}else k.log("Filter fake message")},_pageUnloadListener:function(e){k.sendMessageToDMP({type:v.PAGE_UNLOAD,url:n.href})},_updateCoverElements:function(){var e=this;this._coverElements={},k.each(this._editingActionList,function(t,n){var i=k.queryElement(t.actionElementSelector);i&&(e._coverElements["show-highlight-element-"+n]=i,t.selected&&(e._coverElements[F]=i))})},_bindedCoversObserver:null,_updateCovers:function(){var e=this._coverElements[F];e&&k.isElementVisible(e)&&B.state!==y.PREVIEW?this._showCover(e,F,W):this._hideSelectedElement();var t=this;k.each(z,function(e){var n=t._coverElements[e];n&&k.isElementVisible(n)&&t._showAllSelectedElement?t._showCover(n,e,"tsa-union-behavior-config-handle-selected"):t._hideSelectedHighlightElement(e)})},_bindedClickListener:null,_editClickListener:function(e){var t=e.target;this._hasClass(t,W)||"dmpVtrackEditor"===t.id||(e.preventDefault(),e.stopImmediatePropagation(),("hover-highlight-element"===t.id||k.includes(t.id,"show-highlight-element-"))&&(t=this._coverElements[t.id]),B.state===y.PREVIEW?this._previewElement(t):B.state===y.EDIT&&this._chooseElement(t))},_bindedMouseOverListener:null,_editMouseOverListener:function(e){if(B.state===y.EDIT){var t=e.target;this._shouldTrackElement(t)?this._isInDMPVtrackEditor(t)||(e.stopPropagation(),this._showCover(t,"hover-highlight-element",G)):this._hideHoverElement()}},_bindedMouseOutListener:null,_editMouseOutListener:function(e){var t=e.target;this._shouldTrackElement(t)&&this._hasClass(t,G)&&(e.stopPropagation(),this._hideHoverElement())},_hasClass:function(e,t){if(e.classList)return e.classList.contains(t);var n=/[\t\r\n]/g,i=" "+t+" ";return(" "+e.className+" ").replace(n," ").indexOf(i)>=0},_addClass:function(e,t){e.classList?e.classList.add(t):this._hasClass(e,t)||(e.className+=" "+t)},_removeClass:function(e,t){if(e.classList)e.classList.remove(t);else if(this._hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}},_loadInlineCss:function(){var e=t.createElement("style");e.type="text/css";try{e.appendChild(t.createTextNode(U))}catch(t){e.styleSheet.cssText=U}t.getElementsByTagName("head")[0].appendChild(e)},_previewElement:function(e){k.isEmpty(this._editingActionList)||k.each(this._editingActionList,function(t){k.queryElement(t.actionElementSelector)===e&&k.sendMessageToDMP({type:v.REPORTING_VISUAL_ACTION,actionType:t.actionType,customActionType:t.customActionType})})},_chooseElement:function(e){if(this._shouldTrackElement(e)){var t=-1,i=-2;if(k.each(this._editingActionList,function(n,r){var o=k.queryElement(n.actionElementSelector);o&&o===e&&(t=r),n.selected&&(i=r)}),-1!==t){if(i===t)return;return k.each(this._editingActionList,function(e,n){e.selected=n===t}),k.sendMessageToDMP({type:v.CHOOSE_ELEMENT,url:n.href,editingActionList:this._editingActionList,operation:"SELECT_EXIST_ELEMENT"}),void this._showCover(e,F,W)}if(this._editingActionList.length>=5)k.sendMessageToDMP({type:v.CHOOSE_ELEMENT,url:n.href,operation:"EXCEED_NUM_LIMIT"});else{var r={visualTrackId:-1*(new Date).getTime(),actionElementSelector:this._getUniqueSelector(e),state:"ADD",selected:!0};k.each(this._editingActionList,function(e){e.selected=!1}),this._editingActionList.push(r),k.sendMessageToDMP({type:v.CHOOSE_ELEMENT,url:n.href,editingActionList:this._editingActionList,operation:"ADD_ELEMENT"}),this._showCover(e,F,W),this._showAllSelectedElement&&this._showAllSelectedElements()}}},_showAllSelectedElements:function(){var e=this;k.each(this._editingActionList,function(t,n){if(n>5)k.logError("Action config exceeded, maximum is 5!");else{var i=k.queryElement(t.actionElementSelector);i?e._showCover(i,"show-highlight-element-"+n,"tsa-union-behavior-config-handle-selected"):k.error("Can not find selected elements！")}})},_hideSelectedHighlightElement:function(e){var t=k.queryElement("#"+e);t&&this._css(t,{display:"none"})},_hideAllSelectedElements:function(){for(var e=0;e<5;e++){var t=k.queryElement("#show-highlight-element-"+e);t&&this._css(t,{display:"none"})}},_hideSelectedElement:function(){var e=k.queryElement("#"+F);e&&this._css(e,{display:"none"})},_hideHoverElement:function(){var e=k.queryElement("#hover-highlight-element");e&&this._css(e,{display:"none"})},_showCover:function(e,n,i){var r=t.querySelector("#dmpVtrackEditor");if(r){var o=this._getBoundingBox(e),a=n,s=t.getElementById(a);s||(s=t.createElement("div"),this._setAttr(s,"id",a),this._append(r,s)),this._coverElements[a]=e,this._addClass(s,i),this._css(s,{width:o.width+"px",height:o.height+"px",left:o.left+"px",top:o.top+"px",display:"table",position:o.position})}},_getPosition:function(e){for(var t="fixed"===this._css(e,"position")?"fixed":"absolute";e.offsetParent;){var n=e.offsetParent;"fixed"===this._css(n,"position")&&(t="fixed"),e=n}return t},_getBoundingBox:function(t){var n=this._getPosition(t),i={height:0,left:0,top:0,width:0,position:this._getPosition(t)};if(t){var r=this.__getElementBounds(t);k.extend(i,{height:r.bottom-r.top+0,left:"fixed"===n?r.left-0:r.left+(e.scrollX||e.pageXOffset)-0,top:"fixed"===n?r.top-0:r.top+(e.scrollY||e.pageYOffset)-0,width:r.right-r.left+0})}return i},__getElementBounds:function(e){var t,n=e.children.length===e.childNodes.length;if("a"===e.tagName.toLowerCase()&&e.children.length>0&&n){var i=[];k.each(e.children,function(e){var t=getComputedStyle(e);"a"!==e.tagName&&"none"!==t.display&&i.push(e)}),k.each(i,function(e){var n=e.getBoundingClientRect();t||(t={top:n.top,right:n.right,bottom:n.bottom,left:n.left}),n.top<t.top&&(t.top=n.top),n.right>t.right&&(t.right=n.right),n.bottom>t.bottom&&(t.bottom=n.bottom),n.left<t.left&&(t.left=n.left)})}else t=e.getBoundingClientRect();return t||(t={top:0,right:0,bottom:0,left:0}),t},_setAttr:function(e,t,n){if(k.isObject(t)){var i;for(i in t)e.setAttribute(i,t[i])}else e.setAttribute(t,n)},_append:function(e,t){k.isString(t)?e.insertAdjacentHTML("beforeend",t):e.appendChild(t)},_css:function(t,n){if(k.isString(n))return e.getComputedStyle(t)[n];var i;for(i in n)t.style[i]=n[i]},_extractElementContent:function(e){return["input","select"].indexOf(this._getTagName(e))>-1?e.value:e.textContent||e.innerText||this._getAttr(e,"type")||e.value||""},_isHTMLTag:function(e){return"html"===this._getTagName(e)},_isBodyTag:function(e){return"body"===this._getTagName(e)},_isTextNode:function(e){return"#text"===e.nodeName||3===e.nodeType},_shouldTrackElement:function(e){return!(!e||this._isTextNode(e)||this._isHTMLTag(e)||this._isBodyTag(e))},_isInDMPVtrackEditor:function(e){var t=e.id,n=!1;return k.each(Y,function(e){e===t&&(n=!0)}),n},_getTagName:function(e){return e.tagName?e.tagName.toLowerCase():""},_getAttr:function(e,t){return e.getAttribute(t)},_getParent:function(e){return e.parentNode},_previousElementSibling:function(e){if(e.previousElementSibling)return e.previousElementSibling;do{e=e.previousSibling}while(e&&1!==e.nodeType);return e},_getIndexInParent:function(e){for(var t=1,n=1,i=e;i=this._previousElementSibling(i);)t++,i.tagName===e.tagName&&n++;return{nthChild:t,nthOfType:n}},_classNameFilter:function(e){return!!e&&!["odd","even","active","selected","highlight","required","req","first","last","hover",W,"tsa-union-behavior-config-handle-selected","ignore-gdt-dmp-vtrack",G].includes(e)&&!e.includes("(")},_getSelector:function(e){var t=this._getAttr(e,"id"),n=this._getTagName(e),i=(this._getAttr(e,"class")||"").trim().split(/\s/).filter(this._classNameFilter).filter(function(e){return"ignore-gdt-dmp-vtrack".indexOf(e)<0});return t?"#"+t:i.length>0?n+"."+i.join("."):n},_getUniqueSelector:function(e,n){var i=this._getSelector(e);return/#/.test(i)||1===t.querySelectorAll(i).length?(n&&(i=i+">"+n),i):"body"===this._getTagName(e)||"html"===this._getTagName(e)?(n&&(i=i+">"+n),i):(i+=":nth-of-type("+this._getIndexInParent(e).nthOfType+")",n&&(i=i+">"+n),this._getUniqueSelector(this._getParent(e),i))}},Q=e.gdt;if(!Q)throw k.logError("GDT Pixel code is not installed correctly on this page."),{message:"GDT Pixel code is not installed correctly on this page"};var K=[],$={},Z={},ee=t.referrer,te=e.top!==e.self,ne=n.href,ie="https:"!==n.protocol&&"http:"!==n.protocol?"http://a.gdt.qq.com/pixel":"//a.gdt.qq.com/pixel",re="outer_action_id",oe=!!e.XMLHttpRequest;Q._jsCallbacks=function(){};var ae=k.getQueryParam(ne,"qz_gdt");ae&&e.localStorage&&e.localStorage.setItem&&e.localStorage.setItem("qz_gdt",ae),!ae&&e.localStorage&&e.localStorage.getItem&&(ae=e.localStorage.getItem("qz_gdt"));var se=k.getQueryParam(ne,"gdt_vid");se&&e.localStorage&&e.localStorage.setItem&&e.localStorage.setItem("gdt_vid",se),!se&&e.localStorage&&e.localStorage.getItem&&(se=e.localStorage.getItem("gdt_vid"));var le={allowDuplicatePageViews:!1};Q.tk=o,Q._prepare_callback=function(e,t){if(k.isUndefined(e))return null;if(oe){return function(n){e(n,t)}}var n=Q._jsCallbacks,i=""+Math.floor(1e8*Math.random()),r="gdt._jsCallbacks["+i+"]";return n[i]=function(r){delete n[i],e(r,t)},r},Q._send_request=function(e,n,i){if(oe||(n.callback=i||"(function(){})"),e+="?"+k.HTTPBuildQuery(n),oe)try{var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status)i&&i(k.JSONDecode(r.responseText));else{var e="Bad HTTP status: "+r.status+" "+r.statusText;k.logError(e),i&&i({status:r.status,error:e})}},r.send(null)}catch(e){k.logError(e)}else{var o=t.createElement("script");o.type="text/javascript",o.async=!0,o.defer=!0,o.src=e;var a=t.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)}},function(){for(;Q.queue.length;){var e=Q.queue.shift();o.apply(Q,e)}}(),K.length>1&&k.logWarning("Multiple different pixels were detected on this page."),function(){if(!0!==Q.disablePushState&&i.pushState&&i.replaceState){var t=function(){var e=ne;if((ne=n.href)!==e){var t=new r({allowDuplicatePageViews:!0});o.call(t,"track","PAGE_VIEW")}};k.injectMethod(i,"pushState",t),k.injectMethod(i,"replaceState",t);var a="pushState"in i?"popstate":"hashchange";e.addEventListener(a,t,!1)}}()}(window,document,location,history);}catch(e){var errorMsg = encodeURIComponent('{"error":"LOAD","extra":{"name":"'+e.name+'","line":"'+(e.lineNumber||e.line)+'","script":"'+(e.fileName||e.sourceURL||e.script)+'","stack":"'+(e.stackTrace||e.stack)+'","revision":"1","namespace":"GDT","message":"'+e.message+'"}}');new Image().src="//a.gdt.qq.com/"+'err?c=dmp_js_sdk_error&m='+errorMsg;}